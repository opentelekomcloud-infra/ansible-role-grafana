GRAFANA_IMAGE=grafana/grafana:{{ grafana_image_tag }}
GF_SERVER_ENABLE_GZIP=true
{% if grafana_enable_ssl %}
GF_SERVER_CERT_FILE=/etc/ssl/grafana.cert
GF_SERVER_CERT_KEY=/etc/ssl/grafana.key
GF_SERVER_PROTOCOL=https
{% endif %}
# Initial admin password. Must be changed afterwards
GF_SECURITY_ADMIN_PASSWORD={{ grafana_security_admin_password }}
GF_USERS_ALLOW_SIGN_UP={{ grafana_users_allow_sign_up }}

{% if grafana_db_url is defined and grafana_db_url|length %}
GF_DATABASE_URL={{ grafana_db_url }}
{% endif %}
{% if grafana_db_type is defined and grafana_db_type|length %}
GF_DATABASE_TYPE={{ grafana_db_type }}
{% endif %}
{% if grafana_db_host is defined and grafana_db_host|length %}
GF_DATABASE_HOST={{ grafana_db_host }}
{% endif %}
{% if grafana_db_name is defined and grafana_db_name|length %}
GF_DATABASE_NAME={{ grafana_db_name }}
{% endif %}
{% if grafana_db_user is defined and grafana_db_user|length %}
GF_DATABASE_USER={{ grafana_db_user }}
{% endif %}
{% if grafana_db_password is defined and grafana_db_user|length %}
GF_DATABASE_PASSWORD={{ grafana_db_password }}
{% endif %}
{% if grafana_db_ssl_mode is defined and grafana_db_user|length %}
GF_DATABASE_SSL_MODE={{ grafana_db_ssl_mode }}
{% endif %}

{% if grafana_auth_github_enable is defined and grafana_auth_github_enable %}
GF_AUTH_GITHUB_ENABLED=true
GF_AUTH_GITHUB_ALLOW_SIGN_UP=true
GF_AUTH_GITHUB_CLIENT_ID={{ grafana_auth_github_client_id }}
GF_AUTH_GITHUB_CLIENT_SECRET={{ grafana_auth_github_client_secret }}
scopes=user:email,read:org
auth_url=https://github.com/login/oauth/authorize
token_url=https://github.com/login/oauth/access_token
api_url=https://api.github.com/user
{% if grafana_auth_github_allowed_orgs %}
allowed_organizations={{ grafana_auth_github_allowed_orgs }}
{% endif %}
{% endif %}
